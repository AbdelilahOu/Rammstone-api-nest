generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String     @id @default(uuid())
  email     String     @unique
  password  String
  profile   Profile?
  chatDatas chatData[]
  chat      Chat[]
}

model Profile {
  id          String      @id @default(uuid())
  user        User        @relation(fields: [userId], references: [id])
  userId      String      @unique
  serviceRole serviceRole @default(Owner)
  fullName    String      @unique
  age         Int
  price       Float
  pets        String[]
  services    String[]
  city        String
  published   Boolean     @default(false)
  position    Json
  bio         String
  headLine    String
  role        Role        @default(USER)
  image       String
  ownedPets   Pet[]
}

model Pet {
  id              String   @id @default(uuid())
  name            String
  services        String[]
  age             Int
  price           String
  place           String
  spiece          String
  position        Json
  image           String
  startDate       DateTime
  endDate         DateTime
  createdDate     DateTime
  duration        String
  requestedBy     String[]
  accepted        String[]
  rejected        String[]
  ownerName       String
  ownerId         String   @unique
  profile         Profile? @relation(fields: [profileFullName], references: [fullName])
  profileFullName String?
}

model chatData {
  id        String   @id @default(uuid())
  about     String
  users     Json
  usersids  String[] @unique
  lastseen  Json
  stringids String   @unique
  images    Json
  from      String
  lmsg      String
  time      DateTime
  chat      Chat?
  user      User[]
}

model Chat {
  id         String   @id @default(uuid())
  about      String
  chatIds    String   @unique
  ids        String   @unique
  chat       Json[]
  chatData   chatData @relation(fields: [chatDataId], references: [id])
  chatDataId String   @unique
  user       User[]
}

enum Role {
  ADMIN
  USER
}

enum serviceRole {
  Sitter
  Owner
}
